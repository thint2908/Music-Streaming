<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<!-- CSS only -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
	<link rel="stylesheet" href="css/responsive.css" />
	<link rel="stylesheet" href="css/index.css" />
	<link rel="stylesheet" href="./node_modules/bootstrap-icons/font/bootstrap-icons.css" />
	<link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.min.css" />
	<title>Music Online Page</title>
</head>

<body>
	<nav class="navbar">
		<div class="container">
			<h1 class="nav-left"><i class="mx-2 bi bi-boombox"></i>Music Page</h1>
			<div class="search">
				<i class="bi bi-search"></i>
				<input type="text" name="search-song" id="search-song" placeholder="Tìm kiếm" />
			</div>
			<div class="nav-right">
				<a href="#" class="mx-2 login-btn text-decoration-none text-black p-1">Log In
					<i class="bi bi-box-arrow-in-right"></i>
				</a>

				<a href="#" class="logout-btn text-decoration-none text-black p-1">Log Out
					<i class="bi bi-box-arrow-right"></i>
				</a>
			</div>
		</div>
	</nav>
	<!-- ./navbar -->
	<!-- body -->
	<div class="container-fluid">
		<div class="row top-music">
			<div class="col-lg-2 left-body">
				<div class="left-body-container">
					<span class="leftBody-title">Recommend</span>
					<ul class="list-option">
						<li class="leftBody-recommend item1">For you</li>
						<li class="leftBody-recommend item2">Library</li>
						<li class="leftBody-recommend item3">Radio Station</li>
						<li class="leftBody-recommend item4">Music Video</li>
						<li class="leftBody-recommend item5">Recent</li>
					</ul>
					<span class="leftBody-title">My music</span>
					<ul class="list-option">
						<li class="leftBody-myMusic">Liked song</li>
						<li class="leftBody-myMusic">Album</li>
						<li class="leftBody-myMusic">Artist</li>
						<li class="leftBody-myMusic">Recent</li>
					</ul>
					<span class="leftBody-title">Playlist</span>
					<ul class="list-option">
						<li class="leftBody-playList item1">Rap</li>
						<li class="leftBody-playList item2">Pop</li>
						<li class="leftBody-playList item3">Trap</li>
						<li class="leftBody-playList item4">Dance</li>
					</ul>
				</div>
			</div>
			<div class="col-lg-8 cur-song-list">
				<div class="body-cur w-100">
					<div class="row">
						<div class="col-lg-3 text-center">
							<!-- <input type="search" /> -->
							<div class="title">Top Song 2022</div>
							<div class="img-singer">
								<img src="./img/an-huynh.jpg" alt="an-huynh" />
							</div>
						</div>
						<div class="col-lg-8">
							<div class="singer-list" id="music-container">
								<h1>Đen Vâu</h1>
							</div>
						</div>
					</div>
					<!-- Carousel list top song -->
					<div class="row">
						<h1>List Top Song's</h1>
						<div class="list-top-song">
							<div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
								<div class="carousel-inner">
									<div class="carousel-item active">
										<div class="list-body">
											<div class="list-item">
												<div class="img-song">
													<img src="./img/an-huynh.jpg" alt="" />
												</div>
												<div class="song-name">Đưa nhau đi trốn</div>
											</div>
											<div class="list-item">
												<div class="img-song">
													<img src="./img/an-huynh.jpg" alt="" />
												</div>
												<div class="song-name">Đưa nhau đi trốn</div>
											</div>
											<div class="list-item">
												<div class="img-song">
													<img src="./img/an-huynh.jpg" alt="" />
												</div>
												<div class="song-name">Đưa nhau đi trốn</div>
											</div>
											<div class="list-item">
												<div class="img-song">
													<img src="./img/an-huynh.jpg" alt="" />
												</div>
												<div class="song-name">Đưa nhau đi trốn</div>
											</div>
										</div>
									</div>
									<div class="carousel-item">
										<div class="list-body">
											<div class="list-item">
												<div class="img-song">
													<img src="./img/an-huynh.jpg" alt="" />
												</div>
												<div class="song-name">Đưa nhau đi trốn</div>
											</div>
											<div class="list-item">
												<div class="img-song">
													<img src="./img/an-huynh.jpg" alt="" />
												</div>
												<div class="song-name">Đưa nhau đi trốn</div>
											</div>
											<div class="list-item">
												<div class="img-song">
													<img src="./img/an-huynh.jpg" alt="" />
												</div>
												<div class="song-name">Đưa nhau đi trốn</div>
											</div>
											<div class="list-item">
												<div class="img-song">
													<img src="./img/an-huynh.jpg" alt="" />
												</div>
												<div class="song-name">Đưa nhau đi trốn</div>
											</div>
										</div>
									</div>
									<div class="carousel-item">
										<div class="list-body">
											<div class="list-item">
												<div class="img-song">
													<img src="./img/an-huynh.jpg" alt="" />
												</div>
												<div class="song-name">Đưa nhau đi trốn</div>
											</div>
											<div class="list-item">
												<div class="img-song">
													<img src="./img/an-huynh.jpg" alt="" />
												</div>
												<div class="song-name">Đưa nhau đi trốn</div>
											</div>
											<div class="list-item">
												<div class="img-song">
													<img src="./img/an-huynh.jpg" alt="" />
												</div>
												<div class="song-name">Đưa nhau đi trốn</div>
											</div>
											<div class="list-item">
												<div class="img-song">
													<img src="./img/an-huynh.jpg" alt="" />
												</div>
												<div class="song-name">Đưa nhau đi trốn</div>
											</div>
										</div>
									</div>
								</div>
								<button class="carousel-control-prev" type="button"
									data-bs-target="#carouselExampleControls" data-bs-slide="prev">
									<span class="carousel-control-prev-icon" aria-hidden="true"></span>
									<span class="visually-hidden">Previous</span>
								</button>
								<button class="carousel-control-next" type="button"
									data-bs-target="#carouselExampleControls" data-bs-slide="next">
									<span class="carousel-control-next-icon" aria-hidden="true"></span>
									<span class="visually-hidden">Next</span>
								</button>
							</div>
						</div>
					</div>
					<!-- ./ Carousel list top song-->
				</div>
			</div>
			<div class="col-lg-2 right-body">
				<div class="recent-song right-body-container">
					<h5 class="top-singer">Top Singer 2022</h5>
					<div class="singer-list">
						<div class="singer">Đen Vâu</div>
						<div class="singer">Sơn Tùng</div>
						<div class="singer">Tài Smile</div>
						<div class="singer">Trúc Nhân</div>
						<div class="singer">Đen Vâu</div>
						<div class="singer">Sơn Tùng</div>
						<div class="singer">Tài Smile</div>
						<div class="singer">Trúc Nhân</div>
						<div class="singer">Đen Vâu</div>
						<div class="singer">Sơn Tùng</div>
						<div class="singer">Tài Smile</div>
						<div class="singer">Trúc Nhân</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- ./body -->
	<!-- footer -->
	<footer class="footer">
		<div class="footer-body">
			<div class="song-info">
				<div class="img-song">
					<img src="./img/an-huynh.jpg" alt="" />
				</div>
				<div class="song-name">Đưa nhau đi trốn |</div>
				<div class="song-author">Đen Vâu</div>
			</div>
			<div class="music-status">
				<div class="music-timer">
					<input type="range" name="music-time" id="" />
				</div>
				<div class="music-option">
					<div id="shuffle-btn" class="option-btn">
						<i class="bi bi-shuffle"></i>
					</div>
					<div id="backward-btn" class="option-btn">
						<i class="bi bi-skip-backward-circle"></i>
					</div>
					<div id="play-btn" class="option-btn play-btn" style="display: inline-block">
						<i class="bi bi-play-circle"></i>
					</div>
					<div id="pause-btn" class="option-btn pause-btn" style="display: none">
						<i class="bi bi-pause-circle"></i>
					</div>
					<div id="forward-btn" class="option-btn">
						<i class="bi bi-skip-forward-circle"></i>
					</div>
				</div>
			</div>
		</div>
	</footer>
	<!-- ./footer -->
</body>
<script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
	crossorigin="anonymous"></script>
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
	crossorigin="anonymous"></script>
<script>
	// Load and show song list from database to page
	function loadMusic(link) {
		$.ajax({
			url: link,
			dataType: "json",
			success: function (data) {
				show_data(data);
			},
			error: function (error) {
				// alert("Load fail");
			},
		});
	}
	function show_data(data) {
		let list_body = $("#music-container");

		for (let i = 0; i < data.length; i++) {
			let row = data[i];

			$.post("api/checkPlaylist.php", {
				songName: `${row.name}`
			}, function (res) {
				let a = ``;
				let b = ``;
				if (res == 'true') {
					a = `block`;
					b = `none`;
				} else {
					a = `none`;
					b = `block`;
				}
				let _list = ` <div class="song-list">
						<div class="song-info">
							<div class="song-name">${row.name}</div>
							<div class="song-author">${row.singer_name}</div>
						</div>
						<div class="song-heart">
							<i class="bi bi-heart-fill" style="color: red; display:${a}"></i>
							<i class="bi bi-heart" style="display:${b}"></i>
						</div>
						</div>
						`;
				list_body.append(_list);
			});

		}
		//Handling add song to playlist 
		$(".bi-heart").click(function () {
			let songName = $(this).parent().parent().children("div").children()[0].innerText;
			$(this).parent().children().show();
			$(this).hide();
			$.post("api/addPlaylist.php", {
				songName: songName
			}, function (res) {
				alert(res);
			});
		});
		//Handling remove song from playlist
		$(".bi-heart-fill").click(function () {

			let songName = $(this).parent().parent().children("div").children()[0].innerText;
			$(this).parent().children().show();
			$(this).hide();
			$.post("api/deletePlaylist.php", {
				songName: songName
			}, function (res) {
				alert(res);
			});
		});
	}

	$(function () {
		loadMusic("api/loadMusic.php");
	});
</script>
<script src="js/index.js?v=1"></script>

</html>